{"version":3,"sources":["scripts/request.js","scripts/main.js"],"names":["BASE_URL","ENDPOINTS","phones","phoneById","id","request","url","fetch","then","response","ok","setTimeout","Promise","reject","Error","status","statusText","json","module","exports","require","getPhones","getPhoneDetails","createInfo","type","heading","data","div","document","createElement","list","Array","isArray","forEach","element","insertAdjacentHTML","name","classList","add","innerHTML","append","body","getFirstReceivedDetails","details","race","map","el","getAllSuccessfulDetails","all","getThreeFastestDetails","firstThree","i","push","phonesIds","phone"],"mappings":";AAAA,aAEA,IAAMA,EAAW,4DACXC,EAAY,CAChBC,OAAQ,eACRC,UAAW,SAACC,GAAkBA,MAAAA,WAAAA,OAAAA,EAAnB,WAGPC,EAAU,SAACC,GACRC,OAAAA,MAASP,GAAAA,OAAAA,GAAWM,OAAAA,IACxBE,KAAK,SAAAC,GAOGA,OANFA,EAASC,IACZC,WAAW,WAAMC,OAAAA,QAAQC,OACvB,IAAIC,MAASL,GAAAA,OAAAA,EAASM,OAAYN,OAAAA,OAAAA,EAASO,eAC1C,KAGEP,EAASQ,UAItBC,OAAOC,QAAU,CACflB,UAAAA,EAAWI,QAAAA;;ACtBb,aAE+Be,IAAAA,EAAAA,QAAQ,aAA/BnB,EAAAA,EAAAA,UAAWI,EAAAA,EAAAA,QAEbgB,EAAY,WAAMhB,OAAAA,EAAQJ,EAAUC,SACpCoB,EAAkB,SAAClB,GAAOC,OAAAA,EAAQJ,EAAUE,UAAUC,KAEtDmB,EAAa,SAACC,EAAMC,EAASC,GAC3BC,IAAAA,EAAMC,SAASC,cAAc,OAC7BC,EAAOF,SAASC,cAAc,OACfE,MAAMC,QAAQN,GAAQA,EAAO,CAACA,IAEtCO,QAAQ,SAAAC,GACnBJ,EAAKK,mBAAmB,YAAoBD,OAAAA,OAAAA,EAAQE,KAApD,YAGFT,EAAIU,UAAUC,IAAId,GAClBG,EAAIY,UAAmBd,OAAAA,OAAAA,EAAvB,SACAE,EAAIa,OAAOV,GAEXF,SAASa,KAAKD,OAAOb,IAGjBe,EAA0B,SAACC,GACxB/B,OAAAA,QAAQgC,KAAKD,EAAQE,IAAI,SAAAC,GAAMxB,OAAAA,EAAgBwB,MACnDtC,KAAK,SAAAkB,GACJH,EAAW,iBAAkB,iBAAkBG,MAI/CqB,EAA0B,SAACJ,GACxB/B,OAAAA,QAAQoC,IAAIL,EAAQE,IAAI,SAAAC,GAAMxB,OAAAA,EAAgBwB,MAClDtC,KAAK,SAAAkB,GACJH,EAAW,iBAAkB,iBAAkBG,MAI/CuB,EAAyB,SAACN,GAGzB,IAFCO,IAAAA,EAAa,GAEVC,EAAI,EAAGA,EAAI,EAAGA,IACrBvC,QAAQgC,KAAKD,EAAQE,IAAI,SAAAC,GAAMxB,OAAAA,EAAgBwB,MAC5CtC,KAAK,SAAAsC,GAAMI,OAAAA,EAAWE,KAAKN,KAGzBI,OAAAA,GAGT7B,IACGb,KAAK,SAAAN,GACEmD,IAAAA,EAAYnD,EAAO2C,IAAI,SAAAS,GAASA,OAAAA,EAAMlD,KAE5CsC,EAAwBW,GACxBN,EAAwBM,GACxBJ,EAAuBI","file":"main.8a074a7e.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst BASE_URL = 'https://mate-academy.github.io/phone-catalogue-static/api';\nconst ENDPOINTS = {\n  phones: '/phones.json',\n  phoneById: (id) => `/phones/${id}.json`,\n};\n\nconst request = (url) => {\n  return fetch(`${BASE_URL}${url}`)\n    .then(response => {\n      if (!response.ok) {\n        setTimeout(() => Promise.reject(\n          new Error(`${response.status} - ${response.statusText}`)\n        ), 5000);\n      }\n\n      return response.json();\n    });\n};\n\nmodule.exports = {\n  ENDPOINTS, request,\n};\n","'use strict';\n\nconst { ENDPOINTS, request } = require('./request');\n\nconst getPhones = () => request(ENDPOINTS.phones);\nconst getPhoneDetails = (id) => request(ENDPOINTS.phoneById(id));\n\nconst createInfo = (type, heading, data) => {\n  const div = document.createElement('div');\n  const list = document.createElement('ul');\n  const dataFormated = Array.isArray(data) ? data : [data];\n\n  dataFormated.forEach(element => {\n    list.insertAdjacentHTML('beforeend', `<li>${element.name}</li>`);\n  });\n\n  div.classList.add(type);\n  div.innerHTML = `<h2>${heading}</h2>`;\n  div.append(list);\n\n  document.body.append(div);\n};\n\nconst getFirstReceivedDetails = (details) => {\n  return Promise.race(details.map(el => getPhoneDetails(el)))\n    .then(data => {\n      createInfo('first-received', 'First Received', data);\n    });\n};\n\nconst getAllSuccessfulDetails = (details) => {\n  return Promise.all(details.map(el => getPhoneDetails(el)))\n    .then(data => {\n      createInfo('all-successful', 'All Successful', data);\n    });\n};\n\nconst getThreeFastestDetails = (details) => {\n  const firstThree = [];\n\n  for (let i = 0; i < 3; i++) {\n    Promise.race(details.map(el => getPhoneDetails(el)))\n      .then(el => firstThree.push(el));\n  }\n\n  return firstThree;\n};\n\ngetPhones()\n  .then(phones => {\n    const phonesIds = phones.map(phone => phone.id);\n\n    getFirstReceivedDetails(phonesIds);\n    getAllSuccessfulDetails(phonesIds);\n    getThreeFastestDetails(phonesIds);\n  });\n"]}